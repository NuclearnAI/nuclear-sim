# Comprehensive Nuclear Power Plant Configuration
# 3000 MW PWR with Full Secondary System Integration
# Demonstrates all configuration capabilities of the nuclear simulation system
# CLEANED VERSION - Removed duplicate standalone component sections

# === PLANT IDENTIFICATION ===
plant_name: "Comprehensive PWR Nuclear Plant"
plant_id: "PWR-COMPREHENSIVE-001"
configuration_version: "3.0"
description: "Complete 3-loop PWR configuration with advanced secondary systems"

# === SIMULATION CONFIGURATION ===
simulation_config:
  # Primary simulation parameters
  duration_hours: 24.0
  scenario: "load_following_with_maintenance"
  time_step_minutes: 10.0
  
  # Environment settings
  enable_noise: true
  noise_seed: 12345
  
  # Power constraints
  power_bounds:
    minimum_percent: 20.0
    maximum_percent: 105.0
  
  # Cooling water parameters
  cooling_water:
    base_temperature_c: 25.0
    daily_variation_c: 5.0
    seasonal_variation_c: 10.0

# === LOAD PROFILING CONFIGURATIONS ===
load_profiles:
  profiles:
    load_following_with_maintenance:
      type: "sinusoidal_combined"
      base_power_percent: 90.0
      daily_variation_percent: 15.0
      hourly_variation_percent: 5.0
      description: "Realistic load following with maintenance opportunities"
    
    steady_state_high_power:
      type: "steady_with_noise"
      base_power_percent: 98.0
      noise_std_percent: 2.0
      description: "High power steady state operation"
    
    power_cycling:
      type: "cycling"
      cycle_duration_hours: 4.0
      low_power_percent: 60.0
      high_power_percent: 100.0
      ramp_fraction: 0.3
      description: "Daily power cycling operation"

# === CORE PWR DESIGN PARAMETERS ===
thermal_power_mw: 3000.0
electrical_power_mw: 1000.0
num_loops: 3
steam_generators_per_loop: 1

# Steam cycle parameters
steam_pressure_mpa: 6.9
steam_temperature_c: 285.8
total_steam_flow_kgs: 1500.0
feedwater_temperature_c: 227.0

# === OPERATING PARAMETERS ===
minimum_power_fraction: 0.2
maximum_power_fraction: 1.05
normal_operating_efficiency: 0.33
design_efficiency: 0.33

# === SYSTEM INTEGRATION FEATURES ===
enable_load_following: true
enable_chemistry_tracking: true
enable_maintenance_tracking: true
enable_performance_monitoring: true
enable_predictive_analytics: true
enable_system_coordination: true

# === SECONDARY SYSTEM CONFIGURATION ===
secondary_system:
  # === MAIN SYSTEM PARAMETERS ===
  system_id: "SECONDARY-COMP-001"
  plant_id: "PWR-COMPREHENSIVE-001"
  rated_thermal_power: 3000.0e6  # W (3000 MW) - FIXED TO MATCH MAIN PLANT
  rated_electrical_power: 1000.0  # MW - FIXED TO MATCH MAIN PLANT
  design_efficiency: 0.33  # 33% - FIXED TO MATCH MAIN PLANT
  num_loops: 3  # FIXED TO MATCH MAIN PLANT

  # === STEAM GENERATOR CONFIGURATION ===
  steam_generator:
    system_id: "SG-COMP-001"
    num_steam_generators: 3
    design_total_thermal_power: 3000.0e6
    design_total_steam_flow: 1500.0
    design_steam_pressure: 6.9
    design_steam_temperature: 285.8
    design_feedwater_temperature: 227.0
    
    # Individual SG parameters
    design_thermal_power_per_sg: 1000.0e6
    design_steam_flow_per_sg: 500.0
    design_feedwater_flow_per_sg: 500.0
    
    # Physical parameters
    design_overall_htc: 3000.0
    heat_transfer_area_per_sg: 5000.0
    tube_count_per_sg: 3388
    tube_inner_diameter: 0.0191
    tube_wall_thickness: 0.00109
    tube_outer_diameter: 0.0222
    tube_length: 19.8
    secondary_water_mass: 68000.0
    steam_dome_volume: 28.0
    
    # Heat transfer coefficients
    primary_htc: 28000.0
    secondary_htc: 18000.0
    
    # Design pressures
    design_pressure_primary: 15.51
    design_pressure_secondary: 6.895
    
    # Material properties
    tube_material_conductivity: 385.0
    tube_material_density: 8960.0
    tube_material_specific_heat: 385.0
    
    # Operational parameters
    minimum_power_fraction: 0.1
    maximum_power_fraction: 1.05
    minimum_steam_quality: 0.95
    maximum_tube_wall_temperature: 350.0
    level_control_enabled: true
    pressure_control_enabled: true
    load_following_enabled: true
    
    # Control gains
    feedwater_control_gain: 0.08
    steam_pressure_control_gain: 0.05
    
    # System coordination
    auto_load_balancing: true
    system_coordination: true
    performance_optimization: true
    predictive_maintenance: true
    auto_pressure_control: true
    system_optimization: true
    
    # Performance parameters
    design_efficiency: 0.98
    thermal_performance_factor: 1.0
    availability_factor: 1.0
    
    # Water chemistry integration
    enable_chemistry_tracking: true
    chemistry_update_interval_hours: 1.0
    
    # Initial conditions for 3 steam generators
    # CLEANED VERSION - Only parameters that map to actual physics model state variables
    initial_conditions:
      # Basic SG operational parameters (map to SteamGenerator class state)
      sg_levels: [12.5, 12.5, 12.5]                    # → water_level
      sg_pressures: [6.9, 6.9, 6.9]                    # → secondary_pressure
      sg_temperatures: [285.8, 285.8, 285.8]           # → secondary_temperature
      sg_steam_qualities: [0.99, 0.99, 0.99]           # → steam_quality
      sg_steam_flows: [500.0, 500.0, 500.0]            # → steam_flow_rate
      sg_feedwater_flows: [500.0, 500.0, 500.0]        # → feedwater_flow_rate
      primary_inlet_temps: [327.0, 327.0, 327.0]       # → primary_inlet_temp
      primary_outlet_temps: [293.0, 293.0, 293.0]      # → primary_outlet_temp
      primary_flow_rates: [5700.0, 5700.0, 5700.0]     # → primary flow parameter
      
      # TSP fouling parameters (map to TSPFoulingModel class state)
      tsp_fouling_thicknesses: [0.0, 0.0, 0.0]         # → deposits.get_total_thickness()
      tsp_heat_transfer_degradations: [0.0, 0.0, 0.0]  # → heat_transfer_degradation
      
      # Tube interior scale parameters (map to TubeInteriorFouling class state)
      scale_thicknesses: [0., 0., 0.]               # → scale_thickness → scale_thermal_resistance (calculated)
      
      # Heat transfer parameters (map to SteamGenerator class state)
      tube_wall_temperature: [300.0, 300.0, 300.0]     # → tube_wall_temp
    
    # TSP fouling configuration for 3 steam generators
    tsp_fouling:
      fouling_rate_factors: [1.0, 1.0, 1.0]

  # === TURBINE CONFIGURATION ===
  turbine:
    system_id: "TURB-COMP-001"
    rated_power_mwe: 1000.0
    design_steam_flow: 1500.0
    design_steam_pressure: 6.9
    design_steam_temperature: 285.8
    design_condenser_pressure: 0.007
    design_efficiency: 0.34
    
    # Performance parameters
    mechanical_efficiency: 0.985
    generator_efficiency: 0.985
    auxiliary_power_fraction: 0.02
    
    # Operational parameters
    minimum_load: 0.2
    maximum_load: 1.05
    load_following_enabled: true
    performance_optimization: true
    predictive_maintenance: true
    
    # Complete initial conditions matching TurbineInitialConditions dataclass
    initial_conditions:
      # Rotor conditions
      rotor_speed: 3600.0                           # RPM initial rotor speed
      rotor_acceleration: 0.0                       # RPM/s initial acceleration
      rotor_temperature: 350.0                      # °C initial rotor temperature - REDUCED to prevent thermal expansion trips
      
      # Load conditions
      load_demand: 1.0                              # Initial load demand (0-1)
      electrical_power_output: 1000.0               # MW initial electrical power
      mechanical_power_output: 1015.0               # MW initial mechanical power
      
      # Steam conditions
      steam_inlet_pressure: 6.9                     # MPa steam inlet pressure
      steam_inlet_temperature: 285.8                # °C steam inlet temperature
      steam_inlet_flow: 1500.0                      # kg/s steam inlet flow
      steam_quality: 0.99                           # Steam quality
      
      # Extraction conditions
      extraction_pressures:
        HP-3: 1.5
        HP-4: 1.2
        HP-5: 1.0
        LP-1: 0.3
        LP-2: 0.1
      
      extraction_temperatures:
        HP-3: 200.0
        HP-4: 185.0
        HP-5: 180.0
        LP-1: 120.0
        LP-2: 80.0
      
      # Governor and control
      governor_valve_position: 100.0                # % governor valve position
      control_valve_positions: [100.0, 100.0, 100.0, 100.0]
      
      # Bearing conditions (4 bearings) - SAFETY: Reduced temps to prevent thrust bearing displacement trips
      bearing_temperatures: [70.0, 68.0, 72.0, 69.0]  # °C - Reduced from 80°C to prevent thermal expansion trips
      bearing_vibrations: [5.0, 5.0, 5.0, 5.0]        # mils - Keep low vibrations
      bearing_oil_pressures: [0.2, 0.2, 0.2, 0.2]  # MPa
      
      # Extended Bearing Parameters
      bearing_clearances: [0.05, 0.05, 0.05, 0.05]  # mm bearing clearances
      bearing_oil_flow: [1.0, 1.0, 1.0, 1.0]        # Fraction of design flow
      bearing_wear: [0.3, 0.3, 0.3, 0.3]            # Fraction of life used
      bearing_metal_temperature: [75.0, 75.0, 75.0, 75.0]  # °C metal temperature
      bearing_eccentricity: [0.4, 0.4, 0.4, 0.4]    # Bearing eccentricity fraction
      shaft_position: [0.02, 0.02, 0.02, 0.02]      # mm from center
      bearing_misalignment: [0.03, 0.03, 0.03, 0.03]  # mm misalignment
      shaft_runout: [0.02, 0.02, 0.02, 0.02]        # mm shaft runout
      coupling_offset: [0.02, 0.02, 0.02, 0.02]     # mm coupling offset
      bearing_load_distribution: [0.9, 0.9, 0.9, 0.9]  # Load uniformity index
      
      # Thrust Bearing Parameters
      thrust_bearing_temperature: 75.0              # °C thrust bearing temperature
      thrust_bearing_displacement: 15.0             # mm displacement (well below 50mm trip)
      axial_position: 0.02                          # mm from nominal position
      thrust_load: 500.0                            # kN thrust load
      
      # Lubrication system conditions
      oil_contamination: [5.0, 5.0, 5.0, 5.0]      # ppm oil contamination level per bearing
      oil_level: [100.0, 100.0, 100.0, 100.0]      # % oil level per bearing
      oil_temperature: [45.0, 45.0, 45.0, 45.0]    # °C oil temperature per bearing
      
      # Extended Oil & Lubrication Parameters
      oil_viscosity: 32.0                           # cSt oil viscosity
      oil_acid_number: 0.5                          # mg KOH/g acid number
      oil_water_content: 0.02                       # % water content
      oil_consumption_rate: [0.3, 0.3, 0.3, 0.3]   # L/day consumption rate
      filter_pressure_drop: [0.1, 0.1, 0.1, 0.1]   # MPa filter pressure drop per bearing
      filter_contamination: [30.0, 30.0, 30.0, 30.0] # % filter capacity used per bearing
      filter_bypass_flow: [0.05, 0.05, 0.05, 0.05] # % bypass flow per bearing
      cooler_effectiveness: [0.9, 0.9, 0.9, 0.9]   # Heat transfer effectiveness per bearing
      cooling_water_temperature_rise: [10.0, 10.0, 10.0, 10.0] # °C temperature rise per bearing
      fouling_factor: [0.1, 0.1, 0.1, 0.1]         # m²K/W fouling factor per bearing
      oil_pressure: [0.25, 0.25, 0.25, 0.25]       # MPa oil pressure per bearing
      oil_flow_rate: [1.0, 1.0, 1.0, 1.0]          # Fraction of design flow per bearing
      pump_efficiency: [0.9, 0.9, 0.9, 0.9]        # Oil pump efficiency per bearing
      system_response_time: [1.5, 1.5, 1.5, 1.5]   # seconds response time per bearing
      
      # Rotor & Vibration Parameters
      rotor_vibration: 8.0                          # mils rotor vibration
      rotor_expansion: 8.0                          # mm thermal expansion
      blade_tip_clearance: 0.5                      # mm blade tip clearance
      rotor_bow: 0.03                               # mm rotor bow
      thermal_gradient: 15.0                        # °C/m thermal gradient
      startup_vibration: 12.0                       # mils startup vibration
      critical_speed_shift: 0.02                    # % critical speed shift
      critical_speed_1: 1800.0                      # rpm first critical speed
      critical_speed_2: 3600.0                      # rpm second critical speed
      resonance_amplitude: 8.0                      # mils resonance amplitude
      damping_ratio: 0.12                           # Damping ratio
      
      # Overspeed & Protection Parameters
      overspeed_trip_setting: 3600.0                # rpm overspeed trip setting
      governor_response_time: 0.1                   # seconds governor response
      trip_valve_closure_time: 0.05                 # seconds trip valve closure
      
      # Vibration Monitoring Parameters
      sensor_drift: 0.3                             # % sensor drift
      sensor_sensitivity: 0.98                      # Fraction of specification
      frequency_response: 0.95                      # Fraction of specification
      
      # Dynamic Balancing Parameters
      rotor_unbalance: 80.0                         # g·mm rotor unbalance
      vibration_1x: 8.0                             # mils at 1x frequency
      vibration_2x: 4.0                             # mils at 2x frequency
      phase_angle: 45.0                             # degrees phase angle
      overall_vibration: 10.0                       # mils overall vibration
      casing_vibrations: 6.0                        # mils casing vibration
      frequency_spectrum: 0.9                       # Spectral content index
      
      # Performance & Efficiency Parameters
      heat_rate: 10500.0                            # kJ/kWh heat rate
      steam_consumption: 1.0                        # Fraction of design
      power_output: 1.0                             # Fraction of rated power
      isentropic_efficiency: 0.9                    # Isentropic efficiency
      mechanical_efficiency: 0.985                  # Mechanical efficiency
      generator_efficiency: 0.985                   # Generator efficiency
      
      # System performance conditions
      total_power_output: 1000.0                    # MW total power output
      overall_efficiency: 0.34                      # Overall efficiency
      
      # Protection System Parameters
      trip_system_response: 0.08                    # seconds trip response
      protection_logic_integrity: 0.98              # Protection logic integrity
      sensor_redundancy: 0.95                       # Available sensor redundancy
      
      # Thermal Stress Parameters
      thermal_stress: 120.0                         # MPa thermal stress
      temperature_gradient: 15.0                    # °C/cm temperature gradient
      thermal_fatigue_cycles: 5000                  # Thermal fatigue cycles
      creep_strain: 0.02                            # % creep strain
      
      # System Optimization Parameters
      system_efficiency: 0.95                       # Overall system efficiency
      heat_balance: 0.98                            # Heat balance closure
      performance_degradation: 0.05                 # % degradation from new
      optimization_potential: 0.1                   # % improvement potential
      
      # Blade Parameters
      blade_vibration: 6.0                          # mils blade vibration
      blade_temperature: 450.0                      # °C blade temperature
      blade_stress: 100.0                           # MPa blade stress
      blade_wear: 0.2                               # Fraction of blade life used
      blade_cracking: 0.05                          # Crack density index
      blade_erosion: 0.1                            # mm material loss
      blade_efficiency_loss: 0.03                   # Efficiency reduction
      
      # Governor System Parameters
      speed_regulation: 0.04                        # % speed droop
      load_rejection_response: 0.15                 # seconds load rejection response
      control_valve_position: 0.9                   # Fraction valve open
      
      # Vacuum System Parameters
      turbine_back_pressure: 0.007                  # MPa back pressure
      condenser_vacuum: 0.9                         # Fraction of perfect vacuum
      air_ejector_performance: 0.95                 # Air ejector efficiency
      
      # Startup/Shutdown Parameters
      warmup_time: 90.0                             # minutes warmup time
      thermal_stress_rate: 2.0                      # °C/min thermal stress rate
      synchronization_time: 5.0                     # minutes synchronization time
      cooldown_rate: 1.2                            # °C/min cooldown rate
      turning_gear_engagement: 1.5                  # minutes turning gear time
      residual_vibration: 3.0                       # mils residual vibration
      
      # Thermal conditions
      casing_temperatures: [380.0, 360.0, 340.0, 320.0, 300.0, 280.0]
      blade_temperatures: [500.0, 480.0, 460.0, 440.0, 420.0, 400.0, 380.0, 360.0, 340.0, 320.0, 300.0, 280.0, 260.0, 240.0]
      
      # Protection system
      protection_system_armed: true                 # Protection system status
      trip_active: false                            # Trip status

  # === FEEDWATER CONFIGURATION ===
  feedwater:
    system_id: "FW-COMP-001"
    num_steam_generators: 3
    design_total_flow: 1500.0
    design_sg_level: 12.5
    design_feedwater_temperature: 227.0
    design_pressure: 8.0
    design_suction_pressure: 0.5
    
    # Performance parameters
    design_efficiency: 0.85
    minimum_flow_fraction: 0.1
    maximum_flow_fraction: 1.2
    
    # Operational parameters
    auto_level_control: true
    load_following_enabled: true
    steam_quality_compensation: true
    predictive_maintenance: true
    
    # Initial conditions for 3 steam generators and 4 feedwater pumps
    initial_conditions:
      # System flow conditions
      total_flow_rate: 1500.0                 # kg/s total system flow rate
      total_power_consumption: 15.0           # MW total power consumption
      system_efficiency: 0.85                 # System efficiency
      
      # Steam generator conditions
      sg_levels: [12.5, 12.5, 12.5]          # m SG levels
      sg_pressures: [6.9, 6.9, 6.9]          # MPa SG pressures
      sg_steam_flows: [500.0, 500.0, 500.0]  # kg/s steam flows
      sg_steam_qualities: [0.99, 0.99, 0.99] # Steam qualities
      
      # Pump conditions
      pump_speeds: [3600.0, 3600.0, 3600.0, 0.0]  # RPM pump speeds
      pump_flows: [500.0, 500.0, 500.0, 0.0]      # kg/s pump flows
      pump_heads: [800.0, 800.0, 800.0, 0.0]      # m pump heads
      pump_efficiencies: [0.85, 0.85, 0.85, 0.0]  # Pump efficiencies
      running_pumps: [true, true, true, false]     # Pump running status
      
      # System pressures and temperatures
      suction_pressure: 0.5                   # MPa suction pressure
      discharge_pressure: 8.0                 # MPa discharge pressure
      feedwater_temperature: 227.0            # °C feedwater temperature
      condensate_temperature: 39.0            # °C condensate temperature
      
      # Control system conditions
      control_mode: "automatic"               # Control mode
      level_control_active: true              # Level control status
      flow_control_active: true               # Flow control status
      level_setpoint: 12.5                    # m level setpoint
      flow_demand: 1500.0                     # kg/s flow demand
      
      # Water quality conditions
      feedwater_ph: 9.2                       # Feedwater pH
      dissolved_oxygen: 0.005                 # mg/L dissolved oxygen
      iron_concentration: 0.1                 # mg/L iron concentration
      copper_concentration: 0.05              # mg/L copper concentration
      conductivity: 1.0                       # µS/cm conductivity
      
      # Performance monitoring
      pump_vibrations: [5.0, 5.0, 5.0, 0.0]  # mm/s pump vibrations
      bearing_temperatures: [50.0, 50.0, 50.0, 25.0]  # °C bearing temps
      seal_leakage_rate: [0.0, 0.0, 0.0, 0.0]  # L/min seal leakage rates (authoritative)
      pump_oil_levels: [100.0, 100.0, 100.0, 100.0]  # % pump oil levels
      
      # === EXTENDED OIL & LUBRICATION PARAMETERS ===
      # Oil quality parameters (system-wide parameters)
      pump_oil_contamination: 5.0             # ppm oil contamination
      pump_oil_viscosity: 46.0                # cSt oil viscosity
      pump_oil_water_content: 0.05            # % water content
      pump_oil_acid_number: 1.0               # mg KOH/g acid number
      oil_temperature: 45.0                   # °C oil temperature
      oil_system_debris_count: 200.0          # particles/ml debris count
      
      # Oil filtration parameters (system-wide parameters)
      oil_filter_pressure_drop: 0.15          # MPa filter pressure drop
      oil_filter_contamination: 50.0          # % filter capacity used
      
      # Lubrication system parameters (system-wide parameter)
      lubrication_system_pressure: 0.25       # MPa lubrication system pressure
      oil_pressure: [0.25, 0.25, 0.25, 0.25] # MPa oil pressure per pump
      oil_flow_rate: [1.0, 1.0, 1.0, 1.0]    # Fraction of design flow per pump
      oil_cooler_effectiveness: [0.95, 0.95, 0.95, 0.95]  # Heat transfer effectiveness per pump
      
      # === EXTENDED MECHANICAL PARAMETERS ===
      # Enhanced bearing parameters
      bearing_vibrations: [10.0, 10.0, 10.0, 10.0]  # mm/s bearing vibrations per pump
      bearing_noise_level: [70.0, 70.0, 70.0, 70.0]  # dB bearing noise per pump
      
      # Individual bearing wear parameters (for selective bearing replacement)
      motor_bearing_wear: [0.0, 0.0, 0.0, 0.0]      # Motor bearing wear per pump (0-1 fraction)
      pump_bearing_wear: [0.0, 0.0, 0.0, 0.0]       # Pump bearing wear per pump (0-1 fraction)
      thrust_bearing_wear: [0.0, 0.0, 0.0, 0.0]     # Thrust bearing wear per pump (0-1 fraction)
      
      # Enhanced seal parameters
      seal_face_wear: [0., 0., 0., 0.]   # Fraction of seal life used per pump
      seal_temperature: [70.0, 70.0, 70.0, 70.0]  # °C seal temperature per pump
      seal_pressure_drop: [0.0, 0.0, 0.0, 0.0]  # MPa seal pressure drop per pump
      
      # Enhanced impeller parameters
      impeller_wear: [0.0, 0.0, 0.0, 0.0]    # Fraction of impeller life used per pump
      impeller_cavitation_damage: [0.0, 0.0, 0.0, 0.0]  # Cavitation damage fraction per pump
      impeller_vibration: [8.0, 8.0, 8.0, 8.0]  # mm/s impeller vibration per pump
      impeller_damage: [0.0, 0.0, 0.0, 0.0]  # Impeller damage fraction per pump
      
      # Motor parameters
      motor_temperature: [70.0, 70.0, 70.0, 70.0]  # °C motor temperature per pump
      
      # === EXTENDED PERFORMANCE & SYSTEM PARAMETERS ===
      # Performance parameters (as fractions of design values)
      pump_head: [1.0, 1.0, 1.0, 1.0]        # Fraction of design head per pump
      pump_flow: [1.0, 1.0, 1.0, 1.0]        # Fraction of design flow per pump
      pump_power: [1.0, 1.0, 1.0, 1.0]       # Fraction of design power per pump
      
      # NPSH and cavitation parameters
      npsh_available: [12.0, 12.0, 12.0, 12.0]  # m NPSH available per pump
      cavitation_inception: [1.0, 1.0, 1.0, 1.0]  # Fraction of design flow for cavitation per pump
      cavitation_intensity: [0.05, 0.05, 0.05, 0.05]  # Cavitation intensity index per pump
      noise_level: [75.0, 75.0, 75.0, 75.0]  # dB noise level per pump
      
      # === SYSTEM CHECK PARAMETERS ===
      # Suction system parameters
      suction_line_pressure_drop: [0.03, 0.03, 0.03, 0.03]  # MPa suction line pressure drop per pump
      suction_strainer_dp: [0.01, 0.01, 0.01, 0.01]  # MPa suction strainer pressure drop per pump
      suction_line_air_content: [1.0, 1.0, 1.0, 1.0]  # % air content by volume per pump
      
      # Discharge system parameters
      discharge_valve_position: [1.0, 1.0, 1.0, 1.0]  # Fraction valve open per pump
      discharge_line_vibration: [8.0, 8.0, 8.0, 8.0]  # mm/s discharge line vibration per pump
      
      # === COOLING SYSTEM PARAMETERS ===
      # Cooling water parameters
      cooling_water_temperature: [25.0, 25.0, 25.0, 25.0]  # °C cooling water temperature per pump
      cooling_water_flow: [1.0, 1.0, 1.0, 1.0]  # Fraction of design flow per pump
      heat_exchanger_fouling: [0.1, 0.1, 0.1, 0.1]  # Fouling factor per pump
      
      # Protection system
      protection_system_armed: true            # Protection system status
      trip_active: false                       # Trip status

  # === CONDENSER CONFIGURATION ===
  condenser:
    system_id: "COND-COMP-001"
    design_heat_duty: 2000.0e6
    design_steam_flow: 1500.0
    design_cooling_water_flow: 45000.0
    design_condenser_pressure: 0.007
    design_cooling_water_temp_rise: 10.0
    
    # Performance parameters
    design_thermal_efficiency: 0.95
    minimum_load_fraction: 0.2
    maximum_load_fraction: 1.1
    
    # Operational parameters
    auto_vacuum_control: true
    fouling_monitoring_enabled: true
    tube_leak_monitoring_enabled: true
    predictive_maintenance: true
    
    # Initial conditions - CLEANED VERSION (only parameters used by condenser physics)
    initial_conditions:
      # Steam conditions
      steam_inlet_pressure: 0.007                   # MPa steam inlet pressure
      steam_inlet_temperature: 39.0                 # °C steam inlet temperature
      steam_inlet_flow: 1500.0                      # kg/s steam inlet flow
      steam_inlet_quality: 0.90                     # Steam quality at inlet
      
      # Condensate conditions
      condensate_temperature: 39.0                  # °C condensate temperature
      condensate_flow: 1500.0                       # kg/s condensate flow
      condensate_subcooling: 0.0                    # °C condensate subcooling
      
      # Cooling water conditions
      cooling_water_inlet_temp: 25.0                # °C cooling water inlet temperature
      cooling_water_outlet_temp: 35.0               # °C cooling water outlet temperature
      cooling_water_flow: 45000.0                   # kg/s cooling water flow
      cooling_water_velocity: 2.0                   # m/s cooling water velocity
      
      # Heat transfer conditions
      heat_rejection_rate: 2000.0e6                 # W heat rejection rate
      overall_htc: 3000.0                           # W/m²/K overall heat transfer coefficient
      lmtd: 10.0                                    # °C log mean temperature difference
      thermal_performance_factor: 1.0               # Thermal performance factor
      
      # Vacuum system conditions
      condenser_pressure: 0.007                     # MPa condenser pressure
      air_partial_pressure: 0.0005                  # MPa air partial pressure
      air_removal_rate: 0.1                         # kg/s air removal rate
      vacuum_steam_consumption: 0.3                 # kg/s vacuum steam consumption
      
      # Tube conditions
      active_tube_count: 84000                      # Active tube count
      plugged_tube_count: 0                         # Plugged tube count
      average_wall_thickness: 0.00159               # m average wall thickness
      tube_leak_rate: 0.0                           # kg/s tube leak rate
      
      # Fouling conditions
      biofouling_thickness: 0.0                     # mm biofouling thickness
      scale_thickness: 0.0                          # mm scale thickness
      corrosion_thickness: 0.0                      # mm corrosion product thickness
      total_fouling_resistance: 0.0                 # m²K/W total fouling resistance
      time_since_cleaning: 0.0                      # hours since last cleaning
      
      # Water quality conditions
      water_ph: 7.5                                 # Water pH
      water_hardness: 150.0                         # mg/L water hardness
      chlorine_residual: 1.0                        # mg/L chlorine residual
      dissolved_oxygen: 8.0                         # mg/L dissolved oxygen
      water_temperature: 30.0                       # °C average water temperature
      
      # Operating conditions
      operating_hours: 0.0                          # Total operating hours
      system_availability: true                     # System availability status

  # === INTEGRATION CONFIGURATION ===
  integration:
    # System coordination
    enable_system_coordination: true
    load_following_enabled: true
    automatic_startup_enabled: true
    
    # Performance optimization
    enable_performance_optimization: true
    optimization_interval_hours: 1.0
    efficiency_target: 0.35  # Updated to match new design efficiency
    
    # System protection and interlocks
    enable_system_interlocks: true
    turbine_steam_generator_interlock: true
    feedwater_steam_generator_interlock: true
    condenser_turbine_interlock: true
    
    # Load dispatch and control
    load_dispatch_mode: "automatic"
    load_ramp_rate: 5.0
    minimum_system_load: 0.2
    maximum_system_load: 1.05
    
    # System startup and shutdown
    startup_sequence_enabled: true
    shutdown_sequence_enabled: true
    startup_time_minutes: 180.0
    shutdown_time_minutes: 120.0
    
    # Emergency response
    emergency_shutdown_enabled: true
    emergency_feedwater_enabled: true
    steam_dump_enabled: true
    
    # System monitoring and diagnostics
    enable_system_diagnostics: true
    diagnostic_interval_minutes: 15.0
    performance_trending_enabled: true
    predictive_analytics_enabled: true

  # === MAINTENANCE CONFIGURATION ===
  maintenance:
    # System-level maintenance
    system_efficiency_threshold: 0.32  # Updated for higher efficiency system
    system_availability_threshold: 0.95
    system_reliability_threshold: 0.98
    
    # Coordinated maintenance
    enable_coordinated_maintenance: true
    maintenance_window_hours: 168.0
    outage_planning_enabled: true
    
    # System maintenance actions
    system_performance_test_action: "secondary_system_performance_test"
    system_optimization_action: "secondary_system_optimization"
    system_coordination_test_action: "secondary_system_coordination_test"
    integrated_leak_test_action: "secondary_system_leak_test"
    system_calibration_action: "secondary_system_calibration"
    
    # System maintenance intervals
    system_performance_test_interval_hours: 720.0
    system_optimization_interval_hours: 2190.0
    system_coordination_test_interval_hours: 4380.0
    integrated_leak_test_interval_hours: 8760.0
    system_calibration_interval_hours: 4380.0
    
    # System maintenance cooldowns
    system_performance_test_cooldown_hours: 720.0
    system_optimization_cooldown_hours: 2190.0
    system_coordination_test_cooldown_hours: 4380.0
    integrated_leak_test_cooldown_hours: 8760.0
    system_calibration_cooldown_hours: 4380.0

# === MAINTENANCE SYSTEM CONFIGURATION ===
maintenance_system:
  # Realistic maintenance mode - industry standard thresholds
  maintenance_mode: "realistic"
  maintenance_auto_execute: true
  maintenance_default_check_interval_hours: 4.0
  maintenance_default_cooldown_hours: 24.0
  
  # Component-specific realistic maintenance configurations
  component_configs:
    # Feedwater system maintenance - CORRECTED based on actual state variables
    feedwater:
      check_interval_hours: 4.0
      cooldown_hours: 24.0
      thresholds:
        # === LUBRICATION SYSTEM MAINTENANCE (HIGHEST PRIORITY) ===
        # Oil contamination checked FIRST to ensure oil_change gets priority
        oil_contamination_level:
          threshold: 15.0              # ppm - Typical change-out level
          comparison: "greater_than"
          action: "oil_change"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        
        oil_level:
          threshold: 60.0              # Oil level (lubrication_system.oil_level) - FIXED: Reduced from 75.0% to realistic 60%
          comparison: "less_than"
          action: "oil_top_off"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        
        # === PERFORMANCE MONITORING THRESHOLDS ===
        # Lubrication effectiveness checked AFTER oil_contamination
        lubrication_effectiveness:
          threshold: 0.5              # 85% lubrication effectiveness
          comparison: "less_than"
          action: "lubrication_system_check"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        
        # === CAVITATION-BASED IMPELLER MAINTENANCE ===
        # Impeller replacement triggered by cavitation damage, not non-existent wear tracking
        cavitation_damage:
          threshold: 8.0               # Accumulated cavitation damage (pump.state.cavitation_damage)
          comparison: "greater_than"
          action: "impeller_replacement"  # Resets pump bearing wear in lubrication system
          cooldown_hours: 4380.0       # Semi-annual cooldown
          priority: "HIGH"
        
        cavitation_intensity:
          threshold: 0.25              # Active cavitation intensity (pump.state.cavitation_intensity)
          comparison: "greater_than"
          action: "cavitation_analysis"  # Investigate before damage accumulates
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        
        npsh_available:
          threshold: 8.5               # NPSH available (pump.state.npsh_available)
          comparison: "less_than"
          action: "npsh_analysis"      # Address cavitation conditions
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        
        # === BEARING-BASED MECHANICAL MAINTENANCE ===
        # Bearing issues trigger bearing maintenance, not impeller maintenance
        motor_bearing_wear:
          threshold: 8.0
          comparison: "greater_than"
          action: "bearing_replacement"
          component_id: "motor_bearings"  # NEW: Specify which bearing
          cooldown_hours: 2190.0
          priority: "HIGH"
        
        pump_bearing_wear:
          threshold: 6.0
          comparison: "greater_than" 
          action: "bearing_replacement"
          component_id: "pump_bearings"   # NEW: Specify which bearing
          cooldown_hours: 2190.0
          priority: "HIGH"
        
        thrust_bearing_wear:
          threshold: 4.0
          comparison: "greater_than"
          action: "bearing_replacement"
          component_id: "thrust_bearing"  # NEW: Specify which bearing
          cooldown_hours: 2190.0
          priority: "CRITICAL"
        
        seal_wear:
          threshold: 15.0              # Seal wear (lubrication_system.component_wear['mechanical_seals']) - FIXED: Increased from 4.0% to realistic 25%
          comparison: "greater_than"
          action: "seal_replacement"
          cooldown_hours: 2190.0       # Quarterly cooldown
          priority: "MEDIUM"
        
        # === ADDITIONAL LUBRICATION SYSTEM THRESHOLDS ===
        bearing_temperature:
          threshold: 70.0             # °C - Typical bearing alarm
          comparison: "greater_than"
          action: "bearing_inspection"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        
        vibration_level:
          threshold: 20.0              # mm/s - ISO standard
          comparison: "greater_than"
          action: "vibration_analysis"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        
        #efficiency_factor:
        #  threshold: 0.85              # 85% efficiency factor (multiplier)
        #  comparison: "less_than"
        #  action: "pump_inspection"
        #  cooldown_hours: 720.0        # Monthly cooldown
        #  priority: "MEDIUM"
        
        # Only include thresholds that map to actual lubrication system state variables
        oil_water_content:
          threshold: 0.08              # % water content (lubrication_system.oil_moisture_content)
          comparison: "greater_than"
          action: "oil_analysis"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "MEDIUM"
        
        oil_acid_number:
          threshold: 1.6               # mg KOH/g acid number (lubrication_system.oil_acidity_number)
          comparison: "greater_than"
          action: "oil_analysis"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "MEDIUM"
        
        oil_temperature:
          threshold: 55.0              # °C oil temperature (lubrication_system.oil_temperature)
          comparison: "greater_than"
          action: "lubrication_inspection"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "MEDIUM"
        
        # system_health_factor:
        #   threshold: 0.80              # 80% system health - COMMENTED OUT to prevent overriding oil_change
        #   comparison: "less_than"
        #   action: "component_overhaul"
        #   cooldown_hours: 4380.0       # Semi-annual cooldown
        #   priority: "HIGH"
        
        # === PUMP STATE MONITORING THRESHOLDS ===
        # Only include thresholds that map to actual pump state variables
        motor_temperature:
          threshold: 85.0              # °C motor temperature (pump.state.motor_temperature)
          comparison: "greater_than"
          action: "motor_inspection"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "MEDIUM"
        
        seal_leakage_rate:
          threshold: 0.15              # L/min seal leakage rate (lubrication_system.seal_leakage_rate)
          comparison: "greater_than"
          action: "seal_replacement"
          cooldown_hours: 2190.0       # Quarterly cooldown
          priority: "MEDIUM"
        
        # === MISSING PERFORMANCE & SYSTEM THRESHOLDS ===
        pump_head:
          threshold: 0.94              # 94% of design head
          comparison: "less_than"
          action: "pump_inspection"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        pump_flow:
          threshold: 0.96              # 96% of design flow
          comparison: "less_than"
          action: "pump_inspection"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        pump_power:
          threshold: 1.05              # 105% of design power
          comparison: "greater_than"
          action: "pump_inspection"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        
        # === MISSING NPSH & CAVITATION THRESHOLDS ===
        npsh_available:
          threshold: 8.0               # m NPSH available (vs 12.0 m safety trip)
          comparison: "less_than"
          action: "npsh_analysis"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        suction_pressure:
          threshold: 0.12              # MPa suction pressure (vs 0.2 MPa trip)
          comparison: "less_than"
          action: "npsh_analysis"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        cavitation_inception:
          threshold: 0.86              # 86% of design flow for cavitation
          comparison: "less_than"
          action: "cavitation_analysis"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        cavitation_intensity:
          threshold: 0.25              # 25% cavitation intensity (vs 70% trip)
          comparison: "greater_than"
          action: "cavitation_analysis"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        noise_level:
          threshold: 85.0              # dB noise level
          comparison: "greater_than"
          action: "cavitation_analysis"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "MEDIUM"
        
        # === MISSING SYSTEM CHECK THRESHOLDS ===
        suction_line_pressure_drop:
          threshold: 0.08              # MPa suction line pressure drop
          comparison: "greater_than"
          action: "suction_system_check"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        suction_strainer_dp:
          threshold: 0.025             # MPa suction strainer pressure drop
          comparison: "greater_than"
          action: "suction_system_check"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        suction_line_air_content:
          threshold: 2.8               # % air content by volume
          comparison: "greater_than"
          action: "suction_system_check"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        discharge_pressure:
          threshold: 1.85              # MPa discharge pressure
          comparison: "greater_than"
          action: "discharge_system_inspection"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        discharge_valve_position:
          threshold: 0.86              # 86% valve position (less than full open)
          comparison: "less_than"
          action: "discharge_system_inspection"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        discharge_line_vibration:
          threshold: 12.0              # mm/s discharge line vibration
          comparison: "greater_than"
          action: "discharge_system_inspection"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        
        # === MISSING LUBRICATION SYSTEM CHECK THRESHOLDS ===
        oil_pressure:
          threshold: 0.15              # MPa oil pressure
          comparison: "less_than"
          action: "lubrication_system_check"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        oil_flow_rate:
          threshold: 0.90              # 90% of design oil flow rate
          comparison: "less_than"
          action: "lubrication_system_check"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        oil_cooler_effectiveness:
          threshold: 0.83              # 83% heat transfer effectiveness
          comparison: "less_than"
          action: "lubrication_system_check"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        
        # === MISSING COOLING SYSTEM THRESHOLDS ===
        cooling_water_temperature:
          threshold: 32.0              # °C cooling water temperature
          comparison: "greater_than"
          action: "cooling_system_check"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        cooling_water_flow:
          threshold: 0.86              # 86% of design cooling water flow
          comparison: "less_than"
          action: "cooling_system_check"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        heat_exchanger_fouling:
          threshold: 0.25              # 25% fouling factor
          comparison: "greater_than"
          action: "cooling_system_check"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
    
    # Turbine system maintenance - based on industry standards
    turbine:
      check_interval_hours: 6.0
      cooldown_hours: 24.0
      thresholds:
        vibration_level:
          threshold: 25.0              # mils - Typical alarm setpoint
          comparison: "greater_than"
          action: "vibration_analysis"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        bearing_temperature:
          threshold: 110.0             # °C - Industry standard
          comparison: "greater_than"
          action: "turbine_bearing_inspection"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        efficiency:
          threshold: 0.30              # 30% minimum (90% of 33% design)
          comparison: "less_than"
          action: "efficiency_analysis"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        oil_contamination_level:
          threshold: 15.0              # ppm - Change-out level
          comparison: "greater_than"
          action: "turbine_oil_change"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        oil_level:
          threshold: 70.0              # % - Low level alarm
          comparison: "less_than"
          action: "turbine_oil_top_off"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"
        thrust_bearing_displacement:
          threshold: 0.5               # mm - Displacement alarm (well below 50mm trip)
          comparison: "greater_than"
          action: "thrust_bearing_adjustment"
          cooldown_hours: 24.0         # Daily cooldown (critical safety parameter)
          priority: "CRITICAL"
    
    # Steam generator maintenance - based on industry standards
    steam_generator:
      check_interval_hours: 6.0
      cooldown_hours: 24.0
      thresholds:
        tsp_fouling_fraction:
          threshold: .30             # 5% fouling triggers cleaning
          comparison: "greater_than"
          action: "tsp_chemical_cleaning"
          cooldown_hours: 1.0       # Semi-annual cooldown
          priority: "HIGH"
        tube_wall_temperature:
          threshold: 305.0             # °C - Increased from 300.0 to provide margin after maintenance
          comparison: "greater_than"
          action: "scale_removal"
          cooldown_hours: 24.0         # Increased from 1.0 to 24.0 hours to prevent rapid cycling
          priority: "HIGH"
        steam_quality:
          threshold: 0.90             # 99.5% minimum quality
          comparison: "less_than"
          action: "moisture_separator_maintenance"
          cooldown_hours: 2190.0       # Quarterly cooldown
          priority: "HIGH"
        efficiency:
          threshold: 0.95              # 95% minimum efficiency
          comparison: "less_than"
          action: "secondary_side_cleaning"
          cooldown_hours: 4380.0       # Semi-annual cooldown
          priority: "MEDIUM"
    
    # Condenser maintenance - based on industry standards
    condenser:
      check_interval_hours: 8.0
      cooldown_hours: 24.0
      thresholds:
        fouling_resistance:
          threshold: 0.001             # m²K/W - Cleaning point
          comparison: "greater_than"
          action: "condenser_tube_cleaning"
          cooldown_hours: 2190.0       # Quarterly cooldown
          priority: "MEDIUM"
        tube_cleanliness:
          threshold: 0.80              # 80% minimum cleanliness
          comparison: "less_than"
          action: "condenser_chemical_cleaning"
          cooldown_hours: 4380.0       # Semi-annual cooldown
          priority: "MEDIUM"
        vacuum_level:
          threshold: 85.0              # % minimum vacuum
          comparison: "less_than"
          action: "vacuum_system_test"
          cooldown_hours: 720.0        # Monthly cooldown
          priority: "MEDIUM"
        thermal_performance_factor:
          threshold: 0.85              # 85% minimum performance
          comparison: "less_than"
          action: "condenser_performance_test"
          cooldown_hours: 2190.0       # Quarterly cooldown
          priority: "MEDIUM"
        tube_leak_rate:
          threshold: 0.01              # kg/s maximum leakage
          comparison: "greater_than"
          action: "condenser_tube_plugging"
          cooldown_hours: 168.0        # Weekly cooldown
          priority: "HIGH"

# === ESSENTIAL CONFIGURATION SECTIONS ===
# Simplified versions of supporting configuration sections

# === WATER CHEMISTRY CONFIGURATION ===
water_chemistry:
  # Essential chemistry parameters only
  secondary_chemistry:
    design_ph: 9.2
    design_iron_concentration: 0.1
    design_copper_concentration: 0.05
    design_dissolved_oxygen: 0.005
    design_conductivity: 1.0

# === ENVIRONMENTAL PARAMETERS ===
environmental:
  # Essential site parameters only
  site_elevation_m: 200.0
  design_ambient_temperature_c: 35.0
  design_cooling_water_temperature_c: 25.0
  cooling_water_source: "river"

# === CONFIGURATION METADATA ===
metadata:
  configuration_type: "comprehensive_example"
  description: "Complete 3-loop PWR configuration - duplicate sections removed"
  design_basis: "Generic 3-loop PWR Design"
  cleanup_notes: "Removed duplicate standalone component sections and simplified unused sections"
